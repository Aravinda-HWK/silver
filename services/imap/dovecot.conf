service lmtp {
  unix_listener /var/spool/postfix/private/dovecot-lmtp {
    mode = 0600
    user = postfix
    group = postfix
  }
}

# Enable SASL authentication service for Postfix
service auth {
  unix_listener /var/spool/postfix/private/auth {
    mode = 0666
    user = postfix
    group = postfix
  }
}

# Disable plaintext authentication for security
# Note: This is a basic configuration; consider using SSL/TLS for secure connections.
disable_plaintext_auth = no

# Mailbox configuration - using virtual users
mail_location = maildir:/var/mail/vmail/%n
mail_uid = 5000
mail_gid = 8

# Auth mechanism is set to plain
auth_mechanisms = plain

# Dovecot configuration for IMAP service
protocols = imap lmtp

# Virtual user database configuration
userdb {
  driver = static
  args = uid=vmail gid=vmail home=/var/mail/vmail/%n
}

# Password database configuration - using static passwords for now
passdb {
  driver = static
  args = password=testpass
}

# IMAP service configuration
service imap-login {
  inet_listener imap {
    port = 143
  }
}